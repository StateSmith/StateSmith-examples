<html>
  <body>

    <button id="increase">INCREASE</button>
    <button id="dim">DIM</button>

    <pre class="mermaid">
      stateDiagram

      state LightSm {
          OFF: OFF
          OFF: enter / console.log("OFF#92;n")#59;

          state ON_GROUP {
              ON1: ON1
              ON1: enter / light_blue()#59;
          
              ON2: ON2
              ON2: enter / light_yellow()#59;
              ON2: count = 0#59;
              ON2: INCREASE / count++#59;
          
              ON_HOT: ON_HOT
              ON_HOT: enter / {\nlight_red()#59;\n}            

              ON1 --> ON2: INCREASE
              ON2 --> ON_HOT: INCREASE [count >= 3]
              ON2 --> ON1: DIM
              ON_HOT --> ON2: DIM

              OFF --> ON1: INCREASE
              ON1 --> OFF: DIM
          }

          [*] --> OFF
          ON_GROUP --> OFF: OFF
      }

      classDef active fill:yellow,font-weight:bold,stroke-width:2px

    </pre>

    <script src="LightSm.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: false });
        await mermaid.run();

        var sm = new LightSm();

        document.getElementById("increase").addEventListener ("click", ()=>sm.dispatchEvent(LightSm.EventId.INCREASE), false);
        document.getElementById("dim").addEventListener ("click", ()=>sm.dispatchEvent(LightSm.EventId.DIM), false);

        sm.start();
    </script>


  </body>
</html>
